<!doctype html>
<html lang="zh-Hant">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>å€‹äººè³‡æ–™ - æŸ’æŸ’ chi</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/é ­è²¼ - åœ“å½¢.png') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <!-- å°èˆªæ¬„ -->
    <nav class="navbar">
      <div class="navbar-container">
        <a href="{{ url_for('index') }}" class="navbar-logo">
          <img src="{{ url_for('static', filename='images/é ­è²¼ - åœ“å½¢.png') }}" alt="æŸ’æŸ’ chi" class="navbar-logo-img">
          <span>æŸ’æŸ’ chi</span>
        </a>
        <button class="navbar-toggle" id="navbarToggle" aria-label="åˆ‡æ›é¸å–®">
          <span class="navbar-toggle-icon"></span>
          <span class="navbar-toggle-icon"></span>
          <span class="navbar-toggle-icon"></span>
        </button>
        <ul class="navbar-menu" id="navbarMenu">
          <li class="navbar-item"><a href="/about.html" class="navbar-link">è‡ªæˆ‘ä»‹ç´¹</a></li>
          <li class="navbar-item"><a href="/courses/course.html" class="navbar-link">ç¨‹å¼è¨­è¨ˆèª²ç¨‹</a></li>
          <li class="navbar-item"><a href="/keychain.html" class="navbar-link">é‘°åŒ™åœˆé è³¼</a></li>
          <li class="navbar-item"><a href="/subscriber-benefits.html" class="navbar-link">è¨‚é–±è€…å°ˆå±¬ç¦åˆ©</a></li>
          <li class="navbar-item"><a href="/events.html" class="navbar-link">æ´»å‹•å°ˆå€</a></li>
          <li class="navbar-item"><a href="/donate.html" class="navbar-link">åŠ ç­å°è¦å‰‡èˆ‡èªªæ˜</a></li>
          <li class="navbar-item"><a href="/url.html" class="navbar-link">å„å¹³å°é€£çµ</a></li>
          {% if session.user_id %}
          <li class="navbar-item navbar-dropdown">
            <a href="#" class="navbar-link navbar-dropdown-toggle">è¨­å®š â–¾</a>
            <ul class="navbar-dropdown-menu">
              <li><a href="{{ url_for('profile') }}" class="navbar-dropdown-link">å€‹äººè³‡æ–™</a></li>
              <li><a href="{{ url_for('my_orders') }}" class="navbar-dropdown-link">è¨‚å–®ç®¡ç†</a></li>
            </ul>
          </li>
          <li class="navbar-item"><a href="{{ url_for('logout') }}" class="navbar-link">ç™»å‡º ({{ session.username }})</a></li>
          {% else %}
          <li class="navbar-item"><a href="{{ url_for('login') }}" class="navbar-link">ç™»å…¥</a></li>
          {% endif %}
        </ul>
      </div>
    </nav>

    <div class="cloud cloud--1" aria-hidden="true"></div>
    <div class="cloud cloud--2" aria-hidden="true"></div>
    <div class="cloud cloud--3" aria-hidden="true"></div>
    <div class="cloud cloud--4" aria-hidden="true"></div>
    
    <main class="page">
        <div class="form-container">
            <div class="form-card">
                <h1 class="form-title">ğŸ‘¤ å€‹äººè³‡æ–™</h1>
                
                {% if error %}
                    <div class="form-error">{{ error }}</div>
                {% endif %}
                
                {% if success %}
                    <div class="form-success">{{ success }}</div>
                {% endif %}
                
                <form method="POST" action="">
                    <div class="form-group">
                        <label class="form-label" for="username">ä½¿ç”¨è€…åç¨±</label>
                        <input type="text" id="username" name="username" class="form-input" value="{{ user.username }}" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="email">é›»å­éƒµä»¶ï¼ˆä¸å¯ä¿®æ”¹ï¼‰</label>
                        <input type="email" id="email" name="email" class="form-input" value="{{ user.email }}" readonly style="background: rgba(255,255,255,0.05); cursor: not-allowed;">
                        <p style="color: rgba(255,255,255,0.5); font-size: 12px; margin-top: 6px;">
                            ğŸ’¡ é›»å­éƒµä»¶ç”¨æ–¼ç™»å…¥è­˜åˆ¥ï¼Œç„¡æ³•ä¿®æ”¹
                        </p>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="phone">æ‰‹æ©Ÿè™Ÿç¢¼</label>
                        <input type="tel" id="phone" name="phone" class="form-input" value="{{ user.phone or '' }}" placeholder="è«‹è¼¸å…¥æ‰‹æ©Ÿè™Ÿç¢¼">
                        {% if not user.phone %}
                            <p style="color: #fbbf24; font-size: 12px; margin-top: 6px;">
                                âš ï¸ æ‚¨å°šæœªè¨­å®šæ‰‹æ©Ÿè™Ÿç¢¼ï¼Œé è³¼æ™‚éœ€è¦æä¾›è¯çµ¡é›»è©±
                            </p>
                        {% endif %}
                    </div>
                    
                    <hr style="border: none; border-top: 1px solid rgba(255,255,255,0.1); margin: 30px 0;">
                    
                    <h3 style="color: #93c5fd; margin-bottom: 20px; font-size: 18px;">ğŸ”’ ä¿®æ”¹å¯†ç¢¼ï¼ˆé¸å¡«ï¼‰</h3>
                    <p style="color: rgba(255,255,255,0.6); font-size: 14px; margin-bottom: 20px;">
                        å¦‚ä¸éœ€è¦ä¿®æ”¹å¯†ç¢¼ï¼Œè«‹ç•™ç©ºä¸‹æ–¹æ¬„ä½
                    </p>
                    
                    <div class="form-group">
                        <label class="form-label" for="current_password">ç•¶å‰å¯†ç¢¼</label>
                        <div style="position: relative;">
                            <input type="password" id="current_password" name="current_password" class="form-input" style="padding-right: 50px;" placeholder="è‹¥è¦ä¿®æ”¹å¯†ç¢¼è«‹è¼¸å…¥">
                            <button type="button" id="toggle-current-password" style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; font-size: 20px; padding: 5px; color: rgba(255,255,255,0.6); transition: color 0.3s;" onmouseover="this.style.color='rgba(255,255,255,0.9)'" onmouseout="this.style.color='rgba(255,255,255,0.6)'">
                                é¡¯ç¤ºå¯†ç¢¼
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="new_password">æ–°å¯†ç¢¼ï¼ˆè‡³å°‘ 6 å€‹å­—å…ƒï¼‰</label>
                        <div style="position: relative;">
                            <input type="password" id="new_password" name="new_password" class="form-input" style="padding-right: 50px;" placeholder="è‹¥è¦ä¿®æ”¹å¯†ç¢¼è«‹è¼¸å…¥">
                            <button type="button" id="toggle-new-password" style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; font-size: 20px; padding: 5px; color: rgba(255,255,255,0.6); transition: color 0.3s;" onmouseover="this.style.color='rgba(255,255,255,0.9)'" onmouseout="this.style.color='rgba(255,255,255,0.6)'">
                                é¡¯ç¤ºå¯†ç¢¼
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="confirm_password">ç¢ºèªæ–°å¯†ç¢¼</label>
                        <div style="position: relative;">
                            <input type="password" id="confirm_password" name="confirm_password" class="form-input" style="padding-right: 50px;" placeholder="å†æ¬¡è¼¸å…¥æ–°å¯†ç¢¼">
                            <button type="button" id="toggle-confirm-password" style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; font-size: 20px; padding: 5px; color: rgba(255,255,255,0.6); transition: color 0.3s;" onmouseover="this.style.color='rgba(255,255,255,0.9)'" onmouseout="this.style.color='rgba(255,255,255,0.6)'">
                                é¡¯ç¤ºå¯†ç¢¼
                            </button>
                        </div>
                    </div>
                    
                    <button type="submit" class="form-button">ğŸ’¾ å„²å­˜è®Šæ›´</button>
                </form>
                
                <div class="form-link">
                    <a href="{{ url_for('preorder') }}">è¿”å›é è³¼é é¢</a> | <a href="{{ url_for('logout') }}">ç™»å‡º</a>
                </div>
            </div>
        </div>
    </main>
    
    <script>
        // å°èˆªæ¬„åŠŸèƒ½
        const navbarToggle = document.getElementById('navbarToggle');
        const navbarMenu = document.getElementById('navbarMenu');
        if (navbarToggle && navbarMenu) {
            navbarToggle.addEventListener('click', function() {
                navbarToggle.classList.toggle('active');
                navbarMenu.classList.toggle('active');
            });
            const navbarLinks = navbarMenu.querySelectorAll('.navbar-link');
            navbarLinks.forEach(link => {
                link.addEventListener('click', function() {
                    navbarToggle.classList.remove('active');
                    navbarMenu.classList.remove('active');
                });
            });
            document.addEventListener('click', function(event) {
                const isClickInside = navbarToggle.contains(event.target) || navbarMenu.contains(event.target);
                if (!isClickInside && navbarMenu.classList.contains('active')) {
                    navbarToggle.classList.remove('active');
                    navbarMenu.classList.remove('active');
                }
            });
        }

        // å¯†ç¢¼é¡¯ç¤º/éš±è—åˆ‡æ›
        function setupPasswordToggle(inputId, buttonId) {
            const input = document.getElementById(inputId);
            const btn = document.getElementById(buttonId);
            if (input && btn) {
                btn.addEventListener('click', function() {
                    if (input.type === 'password') {
                        input.type = 'text';
                        btn.textContent = 'éš±è—å¯†ç¢¼';
                    } else {
                        input.type = 'password';
                        btn.textContent = 'é¡¯ç¤ºå¯†ç¢¼';
                    }
                });
            }
        }
        
        setupPasswordToggle('current_password', 'toggle-current-password');
        setupPasswordToggle('new_password', 'toggle-new-password');
        setupPasswordToggle('confirm_password', 'toggle-confirm-password');
    </script>
</body>
</html>
